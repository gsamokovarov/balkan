<%= section_navigation :program %>

<%= render "section", title: "Proposals", cta: -> {
  if @filter == "accepted" && Current.event.proposals.accepted.where(notified_at: nil).any?
    admin_button(:primary, post: select_admin_event_proposals_path(Current.event)) { "Notify all" }
  elsif @filter == "pending" && Current.event.proposals.pending.where(notified_at: nil).any?
    admin_button(:danger, post: waitlist_admin_event_proposals_path(Current.event)) { "Notify all" }
  elsif @filter.nil?
    admin_button(:primary, import: import_admin_event_proposals_path(Current.event)) { "Import" }
  end
} do %>
  <%= render "pills", pills: [
    { name: "All", path: admin_event_proposals_path(Current.event) },
    { name: "Starred", path: admin_event_proposals_path(Current.event, filter: :starred) },
    { name: "Waitinglist", path: admin_event_proposals_path(Current.event, filter: :pending) },
    { name: "Declined", path: admin_event_proposals_path(Current.event, filter: :declined) },
    { name: "Accepted", path: admin_event_proposals_path(Current.event, filter: :accepted) },
  ] %>

  <% if @proposals.any? %>
    <%= render "proposals", proposals: @proposals %>
    <%= admin_paginate @proposals %>
  <% else %>
    <%= render "empty_state" %>
  <% end %>
<% end %>
