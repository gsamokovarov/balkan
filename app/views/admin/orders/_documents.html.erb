<%# locals: (order:) %>

<div class="inline-block min-w-full align-middle">
  <h4 class="mb-2 text-md font-medium text-gray-900 dark:text-gray-100">
    <%= link_to "Invoice ##{order.invoice.prefixed_number}", admin_invoice_path(order.invoice), class: "text-indigo-600 dark:text-indigo-400 hover:underline" %>
  </h4>
  <%= render "document_preview", urls: [
    admin_order_path(order, format: :pdf, locale: :en),
    admin_order_path(order, format: :pdf, locale: :bg),
  ] %>

  <% if order.refunded? %>
    <h4 class="mt-6 mb-2 text-md font-medium text-gray-900 dark:text-gray-100">
      <%= link_to "Credit Note ##{order.credit_note.prefixed_number}", admin_invoice_path(order.credit_note), class: "text-indigo-600 dark:text-indigo-400 hover:underline" %>
    </h4>
    <%= render "document_preview", urls: [
      admin_order_path(order, format: :pdf, locale: :en, type: :credit_note),
      admin_order_path(order, format: :pdf, locale: :bg, type: :credit_note),
    ] %>
  <% end %>

  <div class="mt-4 flex gap-3">
    <% if order.refunded? %>
      <%= turbo_frame_tag "credit_note" do %>
        <%= form_with url: credit_note_admin_order_path do |form| %>
          <%= admin_button(:primary, type: :submit, class: "w-fit") { "Send credit note" } %>
        <% end %>
      <% end %>
    <% else %>
      <%= turbo_frame_tag "invoice" do %>
        <%= form_with url: invoice_admin_order_path do |form| %>
          <%= admin_button(:primary, type: :submit, class: "w-fit") { "Send invoice" } %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
