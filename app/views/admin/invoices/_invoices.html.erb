<%# locals: (invoices:) %>

<%= admin_table invoices do
  column "#", -> { link_to it.id, admin_invoice_path(it), class: "text-indigo-600 hover:underline" }
  column :number, -> { it.prefixed_number }

  column :type do |invoice|
    if invoice.credit_note?
      admin_badge :danger, "Credit note"
    else
      admin_badge :success, "Invoice"
    end
  end

  column :customer, -> { tag.span truncate(it.customer_name, length: 30), title: it.customer_name }
  column :issue_date, -> { (it.issue_date || it.created_at.to_date).iso8601 }
  column :total, -> { format_money(it.total_amount) }
end %>
